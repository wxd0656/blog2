<script type="text/javascript" src='/libs/markdownit.js'></script>
<script type="text/javascript" src='/libs/editor/editor.js'></script>
<script type="text/javascript" src='/libs/webuploader/webuploader.withoutimage.js'></script>
<script type="text/javascript" src='/libs/editor/ext.js'></script>
<script type="text/javascript" src='/libs/bootstrap/js/bootstrap.js'></script>

<div>
  <div class='detial-bg'>
    <div class='edit-head'>
        <% if(typeof(action) !== 'undefined' && action == 'edit'){ %>
        <p class='active'>编辑文章</p>
        <% }else{ %>
        <p class='active'>发布文章</p>
        <% } %>
    </div>
    <div id='editArea'>
      <% if(typeof(edit_error) !== 'undefined' && edit_error){ %>
      <div class="alert alert-error">
        <a class="close" data-dismiss="alert" href="#">&times;</a>
        <strong><%= edit_error %></strong>
      </div>
      <% } %>
      <% if(typeof(error) !== 'undefined' && error){ %>
      <div class="alert alert-error">
        <strong><%= error %></strong>
      </div>
      <% }else{ %>
      <% if (typeof(action) !== 'undefined' && action === 'edit') { %>
      <form id='create_topic_form' action='/article/<%= aid %>/edit' method='post'>
        <% } else { %>
        <form id='create_topic_form' action='/article/create' method='post'>
          <% } %>
            <span>
              <input id="tag" type="input" name="tag" placeholder="标签" value="<%= typeof(tag) !== 'undefined' && tag || '' %>"/>
              <textarea autofocus class='span9' id='title' name='title' rows='1'
                        placeholder="标题"
                      ><%= typeof(title) !== 'undefined' && title || '' %></textarea>
            </span>
            
            <div class='markdown_editor in_editor'>
              <div class='markdown_in_editor'>
                <textarea class='editor' name='content' rows='20'
                          placeholder='内容...'
                        ><%= typeof(content) !== 'undefined' && content || '' %></textarea>

                <div class='editor_buttons'>
                  <input type="submit" class='span-primary submit_btn' data-loading-text="提交中"
                         value="提交">
                </div>
              </div>

            </div>

        </form>
    </div>
    <% } %>
  </div>
</div>


<script>
  (function () {
    var editor = new Editor();
    editor.render($('.editor')[0]);
  })();
</script>
